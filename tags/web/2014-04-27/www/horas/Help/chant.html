<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01 Transitional//EN'>
<HTML><HEAD>
  <META NAME='author CONTENT='Laszlo Kiss'>
  <META NAME='Resource-type' CONTENT='Document'>
  <META NAME='description' CONTENT='Gregorian chant for psalms'>
  <META NAME='keywords' CONTENT='Church tradition, Breviarium, Officium Divinum'>
  <TITLE>Psallite eum</TITLE>
  <link rel='stylesheet' href='brevi.css' type='text/css'>
</HEAD>
<BODY BGCOLOR='#eeeeee' TEXT='#333333'><BR><BR>
<CENTER><TABLE WIDTH=90% BORDER=0 BGCOLOR='white' CELLPADDING=30><TR><TD>
<A NAME='top'>

<CENTER><FONT SIZE=1>
<A HREF='#purpose'>[Purpose]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#widgets'>[Widgets]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#tones'>[Tone files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#psalms'>[Psalm files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#meta'>[Meta files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#pho'>[Pho files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='phoplayer.txt' target=_new>[Phoplayer.exe]</A>&nbsp;&nbsp;&nbsp;

<A HREF='#credits'>[Credits]</A>
</FONT></CENTER>

<H2 ALIGN=CENTER><FONT COLOR=MAROON>Psallite eum</FONT></H2>

Click <A HREF=chant.zip>here</A> to download chant folder with the programlet and accompanied 
folders. After downloading it unzips to chant folder, and redy to run as psall.exe.
The necessary MBROLA files are in mbs folder.<BR><BR>

Some samples converted to audio files <BR><BR>

<A HREF="p90read.wav" target=_new>Psalm 90 first line read</A><BR><BR>

<A HREF="p90p8g.wav"  target=_new>Psalm 90 chanted 8G tone</A><BR><BR>

<A HREF="telucis.wav"  target=_new>Te lucis ante terminum first verse</A><BR><BR>

<A HREF="cstart.wav"  target=_new>Completorium starting invocation</A><BR><BR>

<A NAME=purpose>
<SPAN class=prm>Purpose</span><BR><BR>
The purpose of this programlet is to explore the capabilities of 
<A HREF="http://tcts.fpms.ac.be/synthesis/mbrola.html" TARGET=_NEW>MBROLA</A>
speech synthesizer</B> related to the Gregorian chant. The project is in 
very early stage, and published only for the reason that may be somebody
with better musical knowledge will improve it.<BR><BR>
The process 
<UL>
<LI>starting from saved ASCII text <A HREF=#tones>tone file</A><BR><BR>
<LI>and also ASCII text <A HREF=#psalms>psalm file</A><BR><BR>
<LI>converts the verses of the selected psalm to the MBROLA phoneme set, and composites
the result with the selected tone file as <A HREF="#meta">meta</A> file<BR><BR>
<LI>converts the meta file onto a <A HREF="#pho">pho file</A> acceptable by MBROLA
<B>phoplayer.exe</B><BR><BR>
<LI>finally calls <B>phoplayer.exe</B> program to play the generated pho file<BR><BR>
</UL>

<A NAME=widgets></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Widgets</SPAN><BR><BR>
The programlet comes up with the page:<BR><BR>
<CENTER><IMG SRC="psalliteeum.gif" ALT="main page"></CENTER><BR><BR>
<UL>
<LI>The square traditional <B>four line notation</B> represents the loaded or edited content 
of the selected <B>tone file</B>. After editing the tone file, click <B>show</B> tab, 
to update the notation; selection automatically updates the
notes. The computer generated representation of the neumas is somewhat simplified<BR><BR>
<LI><B>Option buttons</B> allows to select a tone or psalm, the selected file is automatically
loaded<BR><BR>
<LI><B>text areas</B> show the files, and allow save-able/load-able editing<BR><BR>
<LI><B>blue tabs</B> are active widgets to load, save, play the appropriate files, 
or verses of the psalm file<BR><BR>
<LI>Click on the <B>Repeat pho</B> tab to play the content of pho Text area indefinetelly, 
click on <B>Stop pho</B> tab to stop <B>phoplayer.exe</B><BR><BR>
<LI><B>scales</B> at the bottom left allow to set the parameters for <B>phoplayer.exe</B>
MBROLA program<BR><BR>
<LI>If <B>play it</B> box is checked, the generation of meta or pho file is automatically
completed by calling <B>phoplayer.exe</B>, otherwise <B>play pho</B> tab must be clicked.<BR><BR>
<LI><B>scales</B> at bottom right allow to change the optional parameters for
<A HREF="#tones">clef line</A>, or generated as part of <A HREF=#pho>pho file</A> conversion<BR><BR>
</UL>

Changing the <B>Text widgets</B> (either by Option widget or loading editing) will take effect after
the next Play call; changing the <B>scales</B> will take effect with the next verse.<BR><BR> 

<A NAME=tones></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Tone files</SPAN><BR><BR>
Tone files start with the clef line, followed by comma separated note units. 
At this phase only psalm tones are handled. <B>Psalm tone</B> consists of five lines
<UL>
<LI>clef line<BR><BR>
<LI>Initial tone, which is applied only for the beginning of the first line 
of the psalm blending onto the tenor note, the tone of the recitation until change
The note image automatically terminates the initial line by a short bar<BR><BR>
<LI>flex line starts with the tenor, followed by the notes for the flex if any. 
The note image automatically terminates the flex line by a half bar<BR><BR>
<LI>Mediant line also starts with the tenor, followed by the notes for the mediant
The note image automatically terminates the mediant line by a full bar<BR><BR>
<LI>Terminating line, starting  with the tenor followed by the notes for the termination.
The note image automatically closes itself by a double bar<BR><BR>
</UL>

The full form of the <B>clef</B> is:
<PRE>
clefdo|cleffa=key-line=key_pitch=base_time=cons_time,
</PRE>
where :
<UL>
<LI>clefdo or cleffa decides the type of the clef
<LI>key-line is the position of the key, 
even numbers on the lines (2 is the bottom, 8 is the top), 
odd numbers below, between or  above the lines.
<IMG SRC="noteline.gif" ALT="main page" ALIGN=middle>
<LI>key_pitch : optional, default 160, pitch for the do or fa represented by clef
<LI>base_time : optional, default 240 ms, time for a square as vowel
<LI>cons_time : optional, default 60 ms, time for consonants
</UL>
Times are modified <B>time ratio</B> as multiplier,
pitch is modified by <pitch ratio</B> as multiplier,
<B>frequency</B> is set as absolute value.<BR><BR>
See the definition for <B>vowel_perc</B> and <B>added-l</B> controls 
at <A HREF="#pho">pho file</A> section
<BR><BR>

The set of notes are comma separated lists of individuals notes. 
A <B>single note</B> is composited of
<UL>
<LI>note line, as above for clef
<LI> optional - sign for b modifier
<LI> note letter, which may be:
<UL>
<LI>p = square punct
<LI>v = virga
<LI>t = tenor square
<LI>a = accented note, represented by a vertical episema on the image
<LI>f = filling for unaccented syllable, empty square on the image
</UL>
<LI> . = dot for horizontal episema (short elongation) or .. = double dot
for dot in the image (doubling the time for the note).
</UL><BR><BR>

<B>Composite notes</B> are a ~ tilde separated list of single notes,
on the image anything but the pedatus or clivis is represented by diamonds.
<BR><BR>

<A NAME=psalms></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Psalm files</SPAN><BR><BR>
Psalms files had to be divided onto verses as lines, and in each verse one or two asterisks, 
separating the mediant, or the flex and the mediant. Proper application of the tones
requires accented text at least at the end of the sections. As it is regular accent 
should be set only for the words having more than two syllables.<BR><BR>

<A NAME=meta></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Meta files</SPAN><BR><BR>
Meta files consist of comma separated units, alternating the notes and the text.
Composite note shall be followed by exactly one syllable, single note as tenor, may be 
followed by more syllables. Due to the diphthong type execution of MBROLA,
the syllabization may be incorrect, except that only one vowel per syllable.
<B>[1-4]m</B> notification means break, larger number longer break.
<BR><BR>

<A NAME=pho></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Pho files</SPAN><BR><BR>
Pho files consist of lines according to the requirements of phoplayer.exe.
There are three types of lines, the elements separated by space
<UL>
<LI>consonant consonant-time
<LI>_ break time (ms)
<LI> vowel_time vowel_perc pitch
</UL>

<B>vowel_perc</B> means the percentage for the given pitch, (which could be repeated,
99 means no change of pitch during the pronunciation of the vowel).
Composite neumas are generated repeating the vowel adding an 'l'  with <B>added_l</B> time,
to avoid MBROLA errors.

<BR><BR>

<A NAME=credits></A><CENTER><A HREF='#top'><FONT SIZE=1>Top</FONT></A></CENTER><BR> 
<SPAN class=prm>Credits</SPAN><BR><BR>

<A HREF="http://tcts.fpms.ac.be/synthesis/mbrola.html" target=_new>MBROLA</A>
 is the pruduct of Faculte Polytechnique de Mons<BR><BR>

<A HREF="http://tcts.fpms.ac.be/synthesis/mbrola.html" target=_new>Latin voice</A>
from Olivier Bianchi, also from the MBROLA site<BR><BR>

Raw (mbrplay output) => mp3 conversion by 
<A HREF="http://www.nch.com.au/switch" target=_new>Switch Audio file</A> 
converter program of NCH software<BR><BR>

Tones from the 
<A HREF="http://www.musicasacra.com/2007/07/17/liber-usualis-online" target=_new>Liber Usualis 1962</A>
downloaded from the Musica Sacra site<BR><BR>

Accented latin texts from David Siefker 
<A HREF="http://stores.lulu.com/breviary" target=_new>Breviarium Romanum</A> electronic version
<BR><BR>

<CENTER><span class=tadmn>T.A.D.M.N.</span><BR>
<A HREF=# onclick='window.close()'>Close</A></CENTER>
<BR><BR>

<CENTER><FONT SIZE=1>
<A HREF='#purpose'>[Purpose]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#widgets'>[Widgets]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#tones'>[Tone files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#psalms'>[Psalm files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#meta'>[Meta files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='#pho'>[Pho files]</A>&nbsp;&nbsp;&nbsp;
<A HREF='phoplayer.txt' target=_new>[Phoplayer.exe]</A>&nbsp;&nbsp;&nbsp;

<A HREF='#credits'>[Credits]</A>
</FONT></CENTER>

</TD></TR></TABLE></CENTER></BODY></HTML>
