#summary Project to restructure the code for generating formatted output.
#labels Phase-Implementation

= Introduction =

The output produced for the hours and Mass could benefit from aesthetic improvements: alignment, spacing, etc. Also, from a technical standpoint, the HTML is not well-formed, and the logic for generating it is spread throughout the code. Each of successive point blocks progress of the former, and so we should attack the last first, by pulling all of the code that generates HTML into a single module. This page describes the work involved.

(In the first instance, we can focus on the HTML for the hours/Mass, rather than the control widgets at the top and bottom.)


= Details =

Development should take place on the `output` branch. It should be possible to merge this back to `trunk` early and often.

The `Output::HTML` module should contain all HTML logic. It might be profitable to use `CGI.pm` as far as practical to generate the HTML.

To begin with, things like `&setfont` and `&setcell` should be moved into this module. Then new subroutines will need to be factored out from things that are inlined in the existing code. Since we're aiming for a unified codebase, where things are implemented in slightly different ways in the various `?officium.pl` and `?webdia.pl` scripts, this is the time to synchronise them, parameterising things if need be.

We should write unit tests as we go.


= Patronage =

St Augustine, as patron of printers.